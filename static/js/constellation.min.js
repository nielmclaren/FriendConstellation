/*
 constellation.js | http://constellationjs.com/license */
function h(a){throw a;}var p=!0,q=null,s=!1;function t(){return function(){}}function v(a){return function(){return this[a]}}Node=function(a,b){this.id=a;this.data=b?b:{};this.edges=[]};window.Node=Node;Node.prototype.na=function(){for(var a=[],b=0;b<this.edges.length;b++)this.edges[b].tailNode.id==this.id?a.push(this.edges[b].headNode):a.push(this.edges[b].tailNode);return a};Node.prototype.getNeighborNodes=Node.prototype.na;
Node.prototype.nb=function(){for(var a=[],b=0;b<this.edges.length;b++)this.edges[b].tailNode.id==this.id?a.push([this.edges[b],this.edges[b].headNode]):a.push([this.edges[b],this.edges[b].tailNode]);return a};Node.prototype.getNeighborEdgeNodePairs=Node.prototype.nb;Node.prototype.o=function(){jQuery(this).trigger("dataChange")};Node.prototype.dataChanged=Node.prototype.o;Edge=function(a,b,c,d){this.id=a;this.tailNode=b;this.headNode=c;this.data=d?d:{}};window.Edge=Edge;
Edge.prototype.ob=function(a){return a==this.tailNode.id?this.headNode:a==this.headNode.id?this.tailNode:q};Edge.prototype.getOtherNode=Edge.prototype.ob;Edge.prototype.o=function(){jQuery(this).trigger("dataChange")};Edge.prototype.dataChanged=Edge.prototype.o;Graph=function(){this.h=[];this.e=[]};window.Graph=Graph;Graph.prototype.F=function(a,b){this.k(a)&&h("Failed to add node. Node already exists. id="+a);var c=new Node(a,b);this.h.push(c);return c};Graph.prototype.addNode=Graph.prototype.F;
Graph.prototype.k=function(a){for(var b=0;b<this.h.length;b++)if(this.h[b].id==a)return this.h[b];return q};Graph.prototype.getNode=Graph.prototype.k;Graph.prototype.N=function(){return this.h.concat()};Graph.prototype.getNodes=Graph.prototype.N;Graph.prototype.$=function(){return this.h.map(function(a){return a.id})};Graph.prototype.getNodeIds=Graph.prototype.$;Graph.prototype.pa=function(){return this.h.length};Graph.prototype.getNodeLength=Graph.prototype.pa;
Graph.prototype.removeNode=function(a){for(var b=0;b<this.h.length;b++)if(this.h[b].id==a){this.h.splice(b,1);return}h("Failed to remove node. Node does not exist. id="+a)};Graph.prototype.removeNode=Graph.prototype.removeNode;Graph.prototype.Aa=function(a,b){var c=this.k(a);c?c.data=b:h("Failed to update node. Node does not exist. id="+a);return c};Graph.prototype.updateNode=Graph.prototype.Aa;
Graph.prototype.Ca=function(a,b,c,d){var c=2<arguments.length?c:s,d=3<arguments.length?d:s,e=this.k(a);e?e.data=c?jQuery.extend(d,e.data,b):b:e=this.F(a,b);return e};Graph.prototype.upsertNode=Graph.prototype.Ca;
Graph.prototype.D=function(a,b,c,d){this.u(a)&&h("Failed to add edge. Edge already exists. id="+a);var e=this.k(b);e||h("Failed to add edge. Tail node does not exist. id="+b);(b=this.k(c))||h("Failed to add edge. Head node does not exist. id="+c);a=new Edge(a,e,b,d);this.e.push(a);e.edges.push(a);b.edges.push(a);return a};Graph.prototype.addEdge=Graph.prototype.D;Graph.prototype.u=function(a){for(var b=0;b<this.e.length;b++)if(this.e[b].id==a)return this.e[b];return q};Graph.prototype.getEdge=Graph.prototype.u;
Graph.prototype.Z=function(){return this.e.map(function(a){return a.id})};Graph.prototype.getEdgeIds=Graph.prototype.Z;Graph.prototype.ga=function(){return this.e.concat()};Graph.prototype.getEdges=Graph.prototype.ga;Graph.prototype.ma=function(){return this.e.length};Graph.prototype.getEdgeLength=Graph.prototype.ma;
Graph.prototype.da=function(a){var b,c=q;for(b=0;b<this.e.length;b++)if(this.e[b].id==a){c=this.e[b];this.e.splice(b,1);break}if(c){for(b=0;b<c.tailNode.edges.length;b++)if(c.tailNode.edges[b].id==a){c.tailNode.edges.splice(b,1);break}for(b=0;b<c.headNode.edges.length;b++)if(c.headNode.edges[b].id==a){c.headNode.edges.splice(b,1);break}}else h("Failed to remove edge. Edge does not exist. id="+a)};Graph.prototype.removeEdge=Graph.prototype.da;
Graph.prototype.za=function(a,b){var c=this.u(a);c?c.data=b:h("Failed to update edge. Edge does not exist. id="+a);return c};Graph.prototype.updateEdge=Graph.prototype.za;Graph.prototype.Ba=function(a,b,c,d,e,g){var e=4<arguments.length?e:s,g=5<arguments.length?g:s,f=this.u(a);f?f.data=e?jQuery.extend(g,f.data,d):d:f=this.D(a,b,c,d);return f};Graph.prototype.upsertEdge=Graph.prototype.Ba;GraphLoader=function(a){0>=arguments.length||(this.config=a,this.parser=this.constellation=q)};
window.GraphLoader=GraphLoader;GraphLoader.prototype.Y=v("constellation");GraphLoader.prototype.getConstellation=GraphLoader.prototype.Y;GraphLoader.prototype.j=function(a){this.constellation=a};GraphLoader.prototype.setConstellation=GraphLoader.prototype.j;GraphLoader.prototype.pb=v("parser");GraphLoader.prototype.getParser=GraphLoader.prototype.pb;GraphLoader.prototype.Fb=function(a){this.parser=a};GraphLoader.prototype.setParser=GraphLoader.prototype.Fb;
SimpleGraphLoader=function(a){0>=arguments.length||GraphLoader.call(this,a)};window.SimpleGraphLoader=SimpleGraphLoader;SimpleGraphLoader.prototype=new GraphLoader;SimpleGraphLoader.prototype.j=function(a){this.constellation&&jQuery(this.constellation).unbind("initialized");GraphLoader.prototype.j.call(this,a);this.constellation&&jQuery(this.constellation).bind("initialized",{context:this},function(a){a=a.data.context;a.config.url&&a.load(a.config.url)})};
SimpleGraphLoader.prototype.setConstellation=SimpleGraphLoader.prototype.j;SimpleGraphLoader.prototype.load=function(a){this.parser||h("Graph loading halted. No parser has been set.");jQuery.ajax({url:a,context:this,success:function(a){this.parser.parse(a)}})};SimpleGraphLoader.prototype.load=SimpleGraphLoader.prototype.load;TreeGraphLoader=function(a){0>=arguments.length||GraphLoader.call(this,a)};window.TreeGraphLoader=TreeGraphLoader;TreeGraphLoader.prototype=new GraphLoader;
TreeGraphLoader.prototype.j=function(a){GraphLoader.prototype.j.call(this,a);jQuery(this.constellation).bind("nodeselected",t())};GraphParser=function(a){0>=arguments.length||(this.config=a,this.graph=q)};window.GraphParser=GraphParser;GraphParser.prototype.hb=v("graph");GraphParser.prototype.getGraph=GraphParser.prototype.hb;GraphParser.prototype.Cb=function(a){this.graph=a};GraphParser.prototype.setGraph=GraphParser.prototype.Cb;GraphParser.prototype.parse=t();GraphParser.prototype.parse=GraphParser.prototype.parse;
JsonGraphParser=function(a){0>=arguments.length||(a.separator||(a.separator="~~"),GraphParser.call(this,a))};window.JsonGraphParser=JsonGraphParser;JsonGraphParser.prototype=new GraphParser;JsonGraphParser.prototype.parse=function(a){"string"==typeof a&&(a=jQuery.parseJSON(a));var b=this.graph,c=this.config.separator;jQuery.each(a.nodes,function(a,c){b.F(c.id,c.data)});jQuery.each(a.edges,function(a,e){b.D(e.id?e.id:e.source+c+e.target,e.source,e.target,e.data)});jQuery(this).trigger("complete")};
JsonGraphParser.prototype.parse=JsonGraphParser.prototype.parse;RoamerGraphParser=function(a){0>=arguments.length||GraphParser.call(this,a)};window.RoamerGraphParser=RoamerGraphParser;RoamerGraphParser.prototype=new GraphParser;
RoamerGraphParser.prototype.parse=function(a){a instanceof jQuery||(a=jQuery(a));var b=this.graph;a.find("node").each(function(a,d){var d=jQuery(d),e={};jQuery.each(this.attributes,function(a,b){e[b.name]=b.value});b.F(d.attr("id"),e)});a.find("edge").each(function(a,d){var d=jQuery(d),e={};jQuery.each(this.attributes,function(a,b){e[b.name]=b.value});b.D(d.attr("id"),d.attr("tail_node_id"),d.attr("head_node_id"),e)});jQuery(this).trigger("complete")};RoamerGraphParser.prototype.parse=RoamerGraphParser.prototype.parse;
GraphMlParser=function(a){0>=arguments.length||GraphParser.call(this,a)};window.GraphMlParser=GraphMlParser;GraphMlParser.prototype=new GraphParser;
GraphMlParser.prototype.parse=function(a){a instanceof jQuery||(a=jQuery(a));var b=this.graph,c={};a.find('key[for="node"]').each(function(a,b){b=jQuery(b);c[b.attr("id")]=b});var d={};a.find('key[for="edge"]').each(function(a,b){b=jQuery(b);d[b.attr("id")]=b});a.find("node").each(function(a,d){var d=jQuery(d),f={},i;for(i in c){var j=c[i].attr("attr.name").replace(/[^a-zA-Z0-9]/g,"_"),k=d.find('data[key="'+i+'"]');0<k.length&&(f[j]=k.text())}b.F(d.attr("id"),f)});a.find("edge").each(function(a,c){var c=
jQuery(c),f={},i;for(i in d){var j=d[i].attr("attr.name").replace(/[^a-zA-Z0-9]/g,"_"),k=c.find('data[key="'+i+'"]');0<k.length&&(f[j]=k.text())}b.D(c.attr("source")+":"+c.attr("target"),c.attr("source"),c.attr("target"),f)});jQuery(this).trigger("complete")};GraphMlParser.prototype.parse=GraphMlParser.prototype.parse;GraphView=function(a){0>=arguments.length||(this.config=a,this.result=this.source=this.constellation=q,this.Da=p)};window.GraphView=GraphView;GraphView.prototype.Y=v("constellation");
GraphView.prototype.getConstellation=GraphView.prototype.Y;GraphView.prototype.j=function(a){this.constellation=a;this.O()};GraphView.prototype.setConstellation=GraphView.prototype.j;GraphView.prototype.sb=v("source");GraphView.prototype.getSource=GraphView.prototype.sb;GraphView.prototype.Jb=function(a){this.source=a;this.O()};GraphView.prototype.setSource=GraphView.prototype.Jb;GraphView.prototype.Wa=function(){this.O()};GraphView.prototype.sourceChanged=GraphView.prototype.Wa;
GraphView.prototype.qb=v("result");GraphView.prototype.getResult=GraphView.prototype.qb;GraphView.prototype.Gb=function(a){this.result=a;this.O()};GraphView.prototype.setResult=GraphView.prototype.Gb;GraphView.prototype.O=function(){if(this.Da){this.Da=s;var a=this;window.setTimeout(function(){var b=a.validate();a.Da=p;b&&jQuery(a).trigger("change")},50)}};GraphView.prototype.invalidate=GraphView.prototype.O;GraphView.prototype.ea=function(){return s};GraphView.prototype.validate=GraphView.prototype.ea;
DirectGraphView=function(a){0>=arguments.length||GraphView.call(this,a)};window.DirectGraphView=DirectGraphView;DirectGraphView.prototype=new GraphView;
DirectGraphView.prototype.ea=function(){var a,b=this.result.$(),c=this.result.Z(),d=this.source.N(),e=this.source.ga();for(a=0;a<e.length;a++)index=c.indexOf(e[a].id),0<=index&&(edge=this.result.u(e[a].id),edge.data=e[a].data,c.splice(index,1),e.splice(a,1),a--);for(a=0;a<d.length;a++)index=b.indexOf(d[a].id),0<=index&&(node=this.result.k(d[a].id),node.data=d[a].data,b.splice(index,1),d.splice(a,1),a--);for(a=0;a<c.length;a++)this.result.da(c[a]);for(a=0;a<b.length;a++)this.result.removeNode(b[a]);
for(a=0;a<d.length;a++)b=d[a],this.result.F(b.id,b.data);for(a=0;a<e.length;a++)d=e[a],this.result.D(d.id,d.tailNode.id,d.headNode.id,d.data);return p};DirectGraphView.prototype.validate=DirectGraphView.prototype.ea;TreeGraphView=function(a){0>=arguments.length||(GraphView.call(this,a),this.G=q,this.ya=s,this.fa=1)};window.TreeGraphView=TreeGraphView;TreeGraphView.prototype=new GraphView;
TreeGraphView.prototype.j=function(a){this.constellation&&jQuery(this.constellation).unbind("nodeselect");GraphView.prototype.j.call(this,a);this.constellation&&jQuery(this.constellation).bind("nodeselect",{context:this},function(a){a.data.context.Qa()})};TreeGraphView.prototype.setConstellation=TreeGraphView.prototype.j;TreeGraphView.prototype.Qa=function(){this.ya=p;this.G=this.constellation.Ka();this.O()};TreeGraphView.prototype.selectedNodeHandler=TreeGraphView.prototype.Qa;
TreeGraphView.prototype.ea=function(){var a,b,c=this.config.startDepth?this.config.startDepth:2,d=this.config.depth?this.config.depth:3,e=this.config.delay?this.config.delay:1E3;this.ya&&(this.fa=c);if(a=this.source.k(this.G)){a.data.depth=0;var g=this.result.$(),f=this.result.Z(),i=[a],c=[];b={};var j=[a];for(b[this.G]={R:this.fa,ja:0};0<j.length;){var k=j.shift(),o=b[k.id];if(0<o.R){var n=k.edges;for(a=0;a<n.length;a++){var m=n[a],l;l=m.tailNode.id==k.id?m.headNode:m.tailNode;var r=b[l.id];if((!r||
r.R<o.R-1)&&1<o.R)r=o.R-1,l.data.depth=o.ja+1,i.push(l),j.push(l),r={R:r,ja:o.ja+1},b[l.id]=r;0>jQuery.inArray(m,c)&&r&&(m.data.depth=o.ja,c.push(m))}}}for(a=0;a<c.length;a++)b=f.indexOf(c[a].id),0<=b&&(m=this.result.u(c[a].id),m.data=c[a].data,m.o(),f.splice(b,1),c.splice(a,1),a--);for(a=0;a<i.length;a++)b=g.indexOf(i[a].id),0<=b&&(node=this.result.k(i[a].id),node.data=i[a].data,node.o(),g.splice(b,1),i.splice(a,1),a--);for(a=0;a<f.length;a++)b=f[a],jQuery(this.source.k(b)).unbind("dataChange",this.Kb),
this.result.da(b);for(a=0;a<g.length;a++)f=g[a],jQuery(this.source.k(f)).unbind("dataChange",this.Mb),this.result.removeNode(f);for(a=0;a<i.length;a++)g=i[a],f=this.result.F(g.id,jQuery.extend({},g.data)),jQuery(g).bind("dataChange",{context:this,result:f},this.Fa);for(a=0;a<c.length;a++)i=c[a],g=this.result.D(i.id,i.tailNode.id,i.headNode.id,jQuery.extend({},i.data)),jQuery(i).bind("dataChange",{context:this,result:g},this.Fa);this.ya=s;if(this.fa<d){clearTimeout(this.ub);var u=this;this.ub=setTimeout(function(){u.fa++;
u.O()},e)}return p}};TreeGraphView.prototype.validate=TreeGraphView.prototype.ea;TreeGraphView.prototype.Fa=function(a){a.data.result.data=a.target.data;a.data.result.p()};Layout=function(a){0>=arguments.length||(this.config=a)};window.Layout=Layout;Layout.prototype.Y=v("constellation");Layout.prototype.getConstellation=Layout.prototype.Y;Layout.prototype.j=function(a){this.constellation=a};Layout.prototype.setConstellation=Layout.prototype.j;
Layout.prototype.M=function(){for(var a=this.constellation.N(),b=0;b<a.length;b++){var c=a[b];if(c.x==q||c.y==q)c.x=10*Math.floor((100*Math.random()-50)/10),c.y=10*Math.floor((100*Math.random()-50)/10)}jQuery(this).trigger("change")};Layout.prototype.viewChanged=Layout.prototype.M;StaticLayout=function(a){0>=arguments.length||(Layout.call(this,a),this.C=q)};window.StaticLayout=StaticLayout;StaticLayout.prototype=new Layout;
StaticLayout.prototype.j=function(a){this.constellation&&jQuery(this.constellation).unbind("nodemousedown").unbind("mouseup");Layout.prototype.j.call(this,a);this.constellation&&jQuery(this.constellation).bind("nodemousedown",{context:this},function(a){a.data.context.wa(a)}).bind("mouseup",{context:this},function(a){a.data.context.ta(a)})};StaticLayout.prototype.setConstellation=StaticLayout.prototype.j;
StaticLayout.prototype.M=function(){for(var a=this.constellation.N(),b=0;b<a.length;b++){var c=a[b];if(c.x==q||c.y==q)c.x=c.data.x?c.data.x:(Math.random()-0.5)*this.constellation.V,c.y=c.data.y?c.data.y:(Math.random()-0.5)*this.constellation.S}jQuery(this).trigger("change")};StaticLayout.prototype.viewChanged=StaticLayout.prototype.M;StaticLayout.prototype.wa=function(){this.step()};StaticLayout.prototype.ta=function(){this.C&&clearInterval(this.C)};
StaticLayout.prototype.step=function(){for(var a in this.constellation.f){var b=this.constellation.f[a];if(b.ca){var c=b.i,d=b.ca,e=this.constellation.A(c.pageX)-b.ua,b=this.constellation.B(0,c.pageY)-b.va;d.x=this.constellation.T(e,b);d.y=this.constellation.U(e,b)}}jQuery(this).trigger("change");this.C&&clearTimeout(this.C);this.C=setTimeout(function(a){return function(){a.step()}}(this),40)};RoamerLayout=function(a){0>=arguments.length||(Layout.call(this,a),this.C=q,this.la=[])};
window.RoamerLayout=RoamerLayout;RoamerLayout.prototype=new Layout;RoamerLayout.prototype.j=function(a){this.constellation&&(jQuery(this.constellation).unbind("nodeAdded"),this.C&&clearTimeout(this.C));Layout.prototype.j.call(this,a);this.constellation&&(jQuery(this.constellation).bind("nodeAdded",{context:this},function(a,c){a.data.context.la.push(c)}),this.step())};RoamerLayout.prototype.setConstellation=RoamerLayout.prototype.j;RoamerLayout.prototype.M=t();RoamerLayout.prototype.viewChanged=RoamerLayout.prototype.M;
RoamerLayout.prototype.step=function(){var a=this.config,b=a.scrollRate?a.scrollRate:0.1,c=a.baseEdgeLength?a.baseEdgeLength:100,d=a.attractionFactor?a.attractionFactor:0.2,e=a.repulsionFactor?a.repulsionFactor:0.2,g=a.accelerationLimit?a.accelerationLimit:15,a=a.dampingConstant?a.dampingConstant:0.3;0<this.la.length&&(this.setNodeInitialPositions(this.la),this.la=[]);for(var f=this.constellation.Ja(),i=-b*(f.x+f.width/2),b=-b*(f.y+f.height/2),f=this.constellation.N(),j=0;j<f.length;j++)for(var k=
f[j],o=j+1;o<f.length;o++){var n=f[o],m=n.x-k.x,l=n.y-k.y;0==m&&0==l&&(m=0.5*Math.random(),l=0.5*Math.random());for(var r=Math.sqrt(m*m+l*l),u=c,C=m-m/r*u,D=l-l/r*u,m=l=0,E=s,z=0;z<k.edges.length;z++){var F=k.edges[z];if(F.tailNode.id==n.id||F.headNode.id==n.id)E=p}E&&r>u?(l=C*d,m=D*d):r<u&&(l=C*e,m=D*e);r=1;u=k.edges.length;0<u&&(r=1/Math.pow(u,1/3));k.ax+=l*r;k.ay+=m*r;r=1;u=n.edges.length;0<u&&(r=1/Math.pow(u,1/3));n.ax-=l*r;n.ay-=m*r}for(j=0;j<f.length;j++)c=f[j],d=Math.sqrt(c.ax*c.ax+c.ay*c.ay),
d>g&&(c.ax=c.ax/d*g,c.ay=c.ay/d*g),c.ax-=c.vx*a,c.ay-=c.vy*a,c.vx+=c.ax,c.vy+=c.ay,c.x+=c.vx+i,c.y+=c.vy+b,c.ax=0,c.ay=0;for(var H in this.constellation.f)i=this.constellation.f[H],i.ca&&(c=i.i,g=i.ca,a=this.constellation.A(c.pageX)-i.ua,i=this.constellation.B(0,c.pageY)-i.va,g.x=this.constellation.T(a,i),g.y=this.constellation.U(a,i));jQuery(this).trigger("change");this.C&&clearTimeout(this.C);this.C=setTimeout(function(a){return function(){a.step()}}(this),40)};
RoamerLayout.prototype.Eb=function(a){for(var b=0;b<a.length;b++)this.setNodeInitialPosition(a[b])};RoamerLayout.prototype.setNodeInitialPositions=RoamerLayout.prototype.Eb;RoamerLayout.prototype.Db=function(a){var b=0,c=0,d=a.na().filter(this.Ha),e=w(d);1<d.length?(b=e.x,c=e.y):0<d.length&&(c=d[0],b=c.na().filter(this.Ha),0<b.length?(b=w(b),d={x:c.x-b.x,y:c.y-b.y},e=Math.sqrt(d.x*d.x+d.y*d.y),b=c.x+50*d.x/e,c=c.y+50*d.y/e):(b=c.x,c=c.y));a.x=b+Math.random()-0.5;a.y=c+Math.random()-0.5};
RoamerLayout.prototype.setNodeInitialPosition=RoamerLayout.prototype.Db;RoamerLayout.prototype.Ha=function(a){return a.x!=q||a.y!=q};function w(a){if(0>=a.length)return q;for(var b=0,c=0,d=0;d<a.length;d++)var e=a[d],b=b+e.x,c=c+e.y;return{x:b/a.length,y:c/a.length}}NodeRenderer=function(a,b,c){this.constellation=a;this.classes=[];Node.call(this,b,c);this.o();this.y=this.x=q;this.ay=this.ax=this.vy=this.vx=0};window.NodeRenderer=NodeRenderer;NodeRenderer.prototype=new Node;
NodeRenderer.prototype.defaultStyles={};NodeRenderer.prototype.c=function(a){return this.constellation.c("node",this.classes,a,this.data,this.defaultStyles)};NodeRenderer.prototype.getStyle=NodeRenderer.prototype.c;NodeRenderer.prototype.addClass=function(a){0>jQuery.inArray(a,this.classes)&&this.classes.push(a)};NodeRenderer.prototype.addClass=NodeRenderer.prototype.addClass;NodeRenderer.prototype.hasClass=function(a){return 0<=jQuery.inArray(a,this.classes)};NodeRenderer.prototype.hasClass=NodeRenderer.prototype.hasClass;
NodeRenderer.prototype.removeClass=function(a){for(var b;0<=(b=jQuery.inArray(a,this.classes));)this.classes.splice(b,1)};NodeRenderer.prototype.removeClass=NodeRenderer.prototype.removeClass;NodeRenderer.prototype.o=function(){Node.prototype.o.call(this);if(this.data["class"]){this.classes=[];for(var a=this.data["class"].split(/\s/),b=0;b<a.length;b++)this.addClass(a[b])}};NodeRenderer.prototype.dataChanged=NodeRenderer.prototype.o;NodeRenderer.prototype.create=t();
NodeRenderer.prototype.create=NodeRenderer.prototype.create;NodeRenderer.prototype.p=t();NodeRenderer.prototype.draw=NodeRenderer.prototype.p;NodeRenderer.prototype.position=t();NodeRenderer.prototype.position=NodeRenderer.prototype.position;NodeRenderer.prototype.H=t();NodeRenderer.prototype.destroy=NodeRenderer.prototype.H;DefaultNodeRenderer=function(a,b,c){NodeRenderer.call(this,a,b,c);this.xa=this.ra=this.Ma=this.La=this.K=this.label=q};window.DefaultNodeRenderer=DefaultNodeRenderer;
DefaultNodeRenderer.prototype=new NodeRenderer;
DefaultNodeRenderer.prototype.defaultStyles={label:"",tooltip:"",cursor:"default",graphicShape:"circle",graphicFillColor:"#ffffff",graphicLineColor:"#000000",graphicSize:40,leftIconUrl:"",leftIconWidth:16,leftIconHeight:16,rightIconUrl:"",rightIconWidth:16,rightIconHeight:16,leftIconSpacing:0,rightIconSpacing:0,labelBoxEnabled:p,labelBoxFillColor:"#ffffff",labelBoxLineColor:"#000000",labelBoxCornerRadius:5,labelPosition:"center",labelFontColor:"#000000",labelFontWeight:"normal",labelFontFamily:"Arial",
labelFontStyle:"normal",labelFontSize:12};
DefaultNodeRenderer.prototype.create=function(){var a=this.constellation.svg,b=a.group(this.constellation.oa(),{display:"none"});this.a={group:b,qa:a.group(b),z:q,Oa:a.rect(b,0,0,0,0,2,2,{preserveAspectRatio:"none",fill:"#ffffcc",stroke:"#333333",strokeWidth:1}),label:a.text(b,0,0,"",{style:"-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-o-user-select: none;user-select: none;",fontFamily:"Verdana",fontSize:15,fontWeight:"bold",fill:"#441111",textAnchor:"middle",dy:".35em"}),
J:q,L:q,K:a.title(b,"")};jQuery(this.a.group).bind("mouseover",{context:this},function(a){a.data.context.constellation.nodemouseoverHandler(a,a.data.context)}).bind("mouseout",{context:this},function(a){a.data.context.constellation.nodemouseoutHandler(a,a.data.context)}).bind("mousedown",{context:this},function(a){a.data.context.constellation.nodemousedownHandler(a,a.data.context)}).bind("mouseup",{context:this},function(a){a.data.context.constellation.nodemouseupHandler(a,a.data.context)}).bind("click",
{context:this},function(a){a.data.context.constellation.nodeclickHandler(a,a.data.context)}).bind("touchstart",{context:this},function(a){a.data.context.constellation.nodetouchstartHandler(a,a.data.context)}).bind("touchend",{context:this},function(a){a.data.context.constellation.nodetouchendHandler(a,a.data.context)})};DefaultNodeRenderer.prototype.create=DefaultNodeRenderer.prototype.create;
DefaultNodeRenderer.prototype.p=function(){var a=this.constellation.svg;jQuery(this.a.group).css("display","inline");var b={fill:this.c("graphicFillColor"),stroke:this.c("graphicLineColor")},c=this.c("label"),d=this.c("tooltip"),e=this.c("graphicSize"),g=this.c("graphicShape");if(this.La!=g)switch(this.a.z&&(jQuery(this.a.z).remove(),this.a.z=q),g){case "pentagon":break;case "square":this.a.z=a.rect(this.a.qa,-e/2,-e/2,e,e,b);break;case "diamond":break;case "triangle":break;case "circle":this.a.z=
a.circle(this.a.qa,0,0,e/2,b);break;default:h("Failed to draw node graphic. Unknown shape. shape='"+g+"'")}else{if(this.Ma!=e)switch(g){case "pentagon":break;case "square":b.x=-e/2;b.y=-e/2;b.width=e;b.height=e;break;case "diamond":break;case "triangle":break;case "circle":b.r=e/2;break;default:h("Failed to draw node graphic. Unknown shape. shape='"+g+"'")}a.change(this.a.z,b)}this.label!=c&&jQuery(this.a.label).contents().remove().end().append(c);a.change(this.a.label,{fontFamily:this.c("labelFontFamily"),
fontSize:this.c("labelFontSize"),fontStyle:this.c("labelFontStyle"),fontWeight:this.c("labelFontWeight"),fill:this.c("labelFontColor")});var f=this.a.z?this.a.z.getBBox():{width:0,height:0},b=this.a.label.getBBox();switch(this.c("labelPosition")){case "top":labelPosition={x:0,y:-f.height/2-5-3-b.height/2};break;case "right":labelPosition={x:f.width/2+5+b.width/2+8,y:0};break;case "bottom":labelPosition={x:0,y:f.height/2+8+b.height/2};break;case "left":labelPosition={x:-f.width/2-5-8-b.width/2,y:0};
break;default:this.constellation.error("Unexpected value for node labelPosition property. value="+this.c("labelPosition"));case "center":labelPosition={x:0,y:0}}a.change(this.a.label,labelPosition);var b=this.a.label.getBBox(),f=this.c("leftIconWidth"),i=this.c("leftIconHeight"),j=b.x-5-f,k=b.y+b.height/2-i/2,o=this.c("leftIconUrl");o!=this.ra?(this.ra==q?this.a.J=a.tb(this.a.group,j,k,f,i,o):o==q?(a.remove(this.a.J),this.a.J=q):a.change(this.a.J,{"xlink:href":o,x:j,y:k,width:f,height:i}),this.ra=
o):a.change(this.a.J,{x:j,y:k,width:f,height:i});var j=this.c("rightIconWidth"),o=this.c("rightIconHeight"),n=b.x+b.width+5,m=b.y+b.height/2-o/2,l=this.c("rightIconUrl");l!=this.xa?(this.xa==q?this.a.L=a.tb(this.a.group,n,m,j,o,l):l==q?(a.remove(this.a.L),this.a.L=q):a.change(this.a.L,{"xlink:href":l,x:n,y:m,width:j,height:o}),this.xa=l):a.change(this.a.L,{x:n,y:m,width:j,height:o});n=jQuery(this.a.Oa);this.c("labelBoxEnabled")&&0<b.width&&0<b.height?(l=b.y,this.a.J&&k<l&&(l=k),this.a.L&&m<l&&(l=
m),k=b.height,this.a.J&&i>k&&(k=i),this.a.L&&o>k&&(k=o),n.css("display","inline"),n.attr("x",b.x-(this.a.J?f+5:0)-8),n.attr("y",l-3),n.attr("width",b.width+(this.a.J?f+5:0)+(this.a.L?j+5:0)+16),n.attr("height",k+6),b=this.c("labelBoxCornerRadius"),n.attr("rx",b),n.attr("ry",b),a.change(this.a.Oa,{fill:this.c("labelBoxFillColor"),stroke:this.c("labelBoxLineColor")})):n.css("display","none");this.K!=d&&jQuery(this.a.K).contents().remove().end().append(d);jQuery(this.a.group).css("cursor",this.c("cursor"));
this.position();this.label=c;this.K=d;this.Ma=e;this.La=g};DefaultNodeRenderer.prototype.draw=DefaultNodeRenderer.prototype.p;DefaultNodeRenderer.prototype.position=function(){jQuery(this.a.group).attr("transform","translate("+this.x+","+this.y+")rotate("+180*-this.constellation.rotation/Math.PI+")")};DefaultNodeRenderer.prototype.position=DefaultNodeRenderer.prototype.position;DefaultNodeRenderer.prototype.H=function(){jQuery(this.a.group).remove();this.a=q};
DefaultNodeRenderer.prototype.destroy=DefaultNodeRenderer.prototype.H;GephiNodeRenderer=function(a,b,c){NodeRenderer.call(this,a,b,c);this.label="";this.size=0};window.GephiNodeRenderer=GephiNodeRenderer;GephiNodeRenderer.prototype=new NodeRenderer;GephiNodeRenderer.prototype.defaultStyles={label:"",r:255,g:255,b:255,size:5};
GephiNodeRenderer.prototype.create=function(){var a=this.constellation.svg,b=a.group(this.constellation.oa(),{display:"none"}),c=a.group(b);this.a={group:b,qa:c,z:a.circle(c,0,0,this.size/2,{strokeWidth:3}),label:a.text(b,0,0,"",{style:"-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-o-user-select: none;user-select: none;",fontFamily:"Verdana",fontSize:12,fontWeight:"normal",fill:"#333333",textAnchor:"left",dy:".35em"})};jQuery(this.a.group).bind("mouseover",{context:this},
function(a){a.data.context.constellation.nodemouseoverHandler(a,a.data.context)}).bind("mouseout",{context:this},function(a){a.data.context.constellation.nodemouseoutHandler(a,a.data.context)}).bind("mousedown",{context:this},function(a){a.data.context.constellation.nodemousedownHandler(a,a.data.context)}).bind("mouseup",{context:this},function(a){a.data.context.constellation.nodemouseupHandler(a,a.data.context)}).bind("click",{context:this},function(a){a.data.context.constellation.nodeclickHandler(a,
a.data.context)}).bind("touchstart",{context:this},function(a){a.data.context.constellation.nodetouchstartHandler(a,a.data.context)}).bind("touchend",{context:this},function(a){a.data.context.constellation.nodetouchendHandler(a,a.data.context)})};GephiNodeRenderer.prototype.create=GephiNodeRenderer.prototype.create;
GephiNodeRenderer.prototype.p=function(){var a=this.constellation.svg;jQuery(this.a.group).css("display","inline");var b={fill:"#"+(this.c("b")|this.c("g")<<8|this.c("r")<<16).toString(16),stroke:"#333333"},c=this.c("label"),d=this.c("size");this.size!=d?(b.r=d/2,a.change(this.a.z,b),a.change(this.a.label,{x:d/2+10})):a.change(this.a.z,b);this.label!=c&&jQuery(this.a.label).contents().remove().end().append(c);this.position();this.label=c;this.size=d};GephiNodeRenderer.prototype.draw=GephiNodeRenderer.prototype.p;
GephiNodeRenderer.prototype.position=function(){jQuery(this.a.group).attr("transform","translate("+this.x+","+this.y+")rotate("+180*-this.constellation.rotation/Math.PI+")")};GephiNodeRenderer.prototype.position=GephiNodeRenderer.prototype.position;GephiNodeRenderer.prototype.H=function(){jQuery(this.a.group).remove();this.a=q};GephiNodeRenderer.prototype.destroy=GephiNodeRenderer.prototype.H;EdgeRenderer=function(a,b,c,d,e){this.constellation=a;this.classes=[];Edge.call(this,b,c,d,e);this.o()};
window.EdgeRenderer=EdgeRenderer;EdgeRenderer.prototype=new Edge;EdgeRenderer.prototype.defaultStyles={};EdgeRenderer.prototype.c=function(a){return this.constellation.c("edge",this.classes,a,this.data,this.defaultStyles)};EdgeRenderer.prototype.getStyle=EdgeRenderer.prototype.c;EdgeRenderer.prototype.addClass=function(a){0>jQuery.inArray(a,this.classes)&&this.classes.push(a)};EdgeRenderer.prototype.addClass=EdgeRenderer.prototype.addClass;
EdgeRenderer.prototype.hasClass=function(a){return 0<=jQuery.inArray(a,this.classes)};EdgeRenderer.prototype.hasClass=EdgeRenderer.prototype.hasClass;EdgeRenderer.prototype.removeClass=function(a){for(var b;0<=(b=jQuery.inArray(a,this.classes));)this.classes.splice(b,1)};EdgeRenderer.prototype.removeClass=EdgeRenderer.prototype.removeClass;EdgeRenderer.prototype.o=function(){Edge.prototype.o.call(this);if(this.data["class"]){this.classes=[];for(var a=this.data["class"].split(/\s/),b=0;b<a.length;b++)this.addClass(a[b])}};
EdgeRenderer.prototype.dataChanged=EdgeRenderer.prototype.o;EdgeRenderer.prototype.create=t();EdgeRenderer.prototype.create=EdgeRenderer.prototype.create;EdgeRenderer.prototype.p=t();EdgeRenderer.prototype.draw=EdgeRenderer.prototype.p;EdgeRenderer.prototype.H=t();EdgeRenderer.prototype.destroy=EdgeRenderer.prototype.H;DefaultEdgeRenderer=function(a,b,c,d,e){EdgeRenderer.call(this,a,b,c,d,e);this.K=q};window.DefaultEdgeRenderer=DefaultEdgeRenderer;DefaultEdgeRenderer.prototype=new EdgeRenderer;
DefaultEdgeRenderer.prototype.defaultStyles={edgeLineColor:"#000000",edgeLineThickness:1,tooltip:"",cursor:"default",arrowhead:p,bidirectional:s,reverse:s};
DefaultEdgeRenderer.prototype.create=function(){var a=this.constellation.svg,b=a.group(this.constellation.Ia());this.a={group:b,line:a.line(b,0,0,10,0,{display:"none",stroke:this.c("edgeLineColor"),strokeWidth:this.c("edgeLineThickness")}),K:a.title(b,"")};jQuery(this.a.line).bind("mouseover",{context:this},function(a){a.data.context.constellation.edgemouseoverHandler(a,a.data.context)}).bind("mouseout",{context:this},function(a){a.data.context.constellation.edgemouseoutHandler(a,a.data.context)}).bind("mousedown",
{context:this},function(a){a.data.context.constellation.edgemousedownHandler(a,a.data.context)}).bind("mouseup",{context:this},function(a){a.data.context.constellation.edgemouseupHandler(a,a.data.context)}).bind("click",{context:this},function(a){a.data.context.constellation.edgeclickHandler(a,a.data.context)}).bind("touchstart",{context:this},function(a){a.data.context.constellation.edgetouchstartHandler(a,a.data.context)}).bind("touchend",{context:this},function(a){a.data.context.constellation.edgetouchendHandler(a,
a.data.context)})};DefaultEdgeRenderer.prototype.create=DefaultEdgeRenderer.prototype.create;DefaultEdgeRenderer.prototype.p=function(){jQuery(this.a.line).attr("x1",this.tailNode.x).attr("y1",this.tailNode.y).attr("x2",this.headNode.x).attr("y2",this.headNode.y).css("stroke",this.c("edgeLineColor")).css("strokeWidth",this.c("edgeLineThickness")).css("cursor",this.c("cursor")).css("display","inline");var a=this.c("tooltip");this.K!=a&&jQuery(this.a.K).contents().remove().end().append(a);this.K=a};
DefaultEdgeRenderer.prototype.draw=DefaultEdgeRenderer.prototype.p;DefaultEdgeRenderer.prototype.H=function(){jQuery(this.a.line).remove()};DefaultEdgeRenderer.prototype.destroy=DefaultEdgeRenderer.prototype.H;Constellation=function(a,b){this.config=jQuery.extend(p,this.Xa,a);this.ka=b?this.Ga.concat(b):this.Ga;this.h=[];this.e=[];this.svg=q;this.t=this.s=this.S=this.V=0;this.l=1;this.rotation=0;this.f={};this.P=this.G=this.n=this.d=q};window.Constellation=Constellation;Constellation.Lb={};
Constellation.prototype.vb=function(){this.debug("Initializing Constellation.");document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")||h("Failed to initialize Constellation. SVG not supported.");var a="#"+this.config.id,b=jQuery(a);0>=b.length&&h("Failed to initialize Constellation. Container does not exist. id="+a);b.html('<div style="position:relative;width:100%;height:100%"><div class="container" style="overflow:hidden;position:absolute;width:100%;height:100%;z-index:2"></div><div class="background" style="position:absolute;width:100%;height:100%;z-index:1"></div></div>');
this.q=b.find("div.container");this.q.svg({onLoad:function(a){return function(b){a.svg=b;a.debug("SVG initialized");x(a);a.Ea=a.svg.group();a.Za=a.svg.group(a.Ea);a.ia=a.svg.group(a.Ea);y(a)}}(this)});this.Na();this.Va(new Graph);a=this.config.graphLoaderClass;this.Ra(a?new a(this.config.graphLoader):q);a=this.config.graphParserClass;this.Sa(a?new a(this.config.graphParser):q);a=this.config.graphViewClass;this.Ta(a?new a(this.config.graphView):q);a=this.config.layoutClass;this.Ua(a?new a(this.config.layout):
q);"createTouch"in document?this.q.bind("touchstart",{context:this},function(a){var b=a.data.context;a.stopPropagation();a.preventDefault();for(var e=0;e<a.originalEvent.changedTouches.length;e++){var g=a.originalEvent.changedTouches[e],f=b.f["_"+g.identifier]={aa:p,i:g,pageX:g.pageX,pageY:g.pageY,timestamp:(new Date).getTime()},i=b.A(g.pageX),g=b.B(0,g.pageY);f.x=b.T(i,g);f.y=b.U(i,g);b.d?b.n||(b.n=f):b.d=f}jQuery(b).trigger("touchstart")}).bind("touchmove",{context:this},function(a){var b=a.data.context;
a.stopPropagation();a.preventDefault();A(b);jQuery(b).trigger("touchmove")}).bind("touchend",{context:this},function(a){var b=a.data.context;a.preventDefault();A(b);for(var e=0;e<a.originalEvent.changedTouches.length;e++)var g=a.originalEvent.changedTouches[e],f=b.f["_"+g.identifier];for(e=0;e<a.originalEvent.changedTouches.length;e++)g=a.originalEvent.changedTouches[e],f=b.f["_"+g.identifier],delete b.f["_"+g.identifier],b.d==f&&(b.d=b.n,b.n=q,b.d&&(b.d.pageX=b.d.i.pageX,b.d.pageY=b.d.i.pageY,b.d.s=
b.s,b.d.t=b.t,b.d.l=b.l)),b.n==f&&(b.n=q,b.d&&(b.d.pageX=b.d.i.pageX,b.d.pageY=b.d.i.pageY,b.d.s=b.s,b.d.t=b.t,b.d.l=b.l));jQuery(b).trigger("touchend")}).bind("touchcancel",{context:this},function(a){var b=a.data.context;a.preventDefault();for(var e=0;e<a.originalEvent.changedTouches.length;e++)delete b.f["_"+a.originalEvent.changedTouches[e].identifier];jQuery(b).trigger("touchcancel")}):(jQuery(document).mousemove({context:this},function(a){var b=a.data.context,e=b.f._mouse;e&&(e.i=a);A(b)}).mouseup({context:this},
function(a){a.data.context.ta(a)}),this.q.find("svg").mousedown({context:this},function(a){var b=a.data.context,e=b.f._mouse={aa:s,i:a,pageX:a.pageX,pageY:a.pageY},g=b.A(a.pageX),a=b.B(0,a.pageY);e.x=b.T(g,a);e.y=b.U(g,a);b.d?b.n||(b.n=e):b.d=e;jQuery(b).trigger("mousedown")}).click({context:this},function(a){a.stopPropagation();a.preventDefault()}),jQuery(this.canvas).mousewheel({context:this},function(a,b){var e=a.data.context;a.preventDefault();e.Q(e.ha()+0.1*b);jQuery(e).trigger("mousewheel")}));
x(this);jQuery(this).trigger("initialized")};Constellation.prototype.init=Constellation.prototype.vb;
Constellation.prototype.Na=function(){var a=this.config.zoomSlider;if(!this.q.button||!this.q.slider)this.warn("Missing jQuery UI so skipping zoom controls initialization.");else{this.q.append('<div class="zoomControls"><button class="zoomInButton">Zoom in</button><div class="zoomSlider"></div><button class="zoomOutButton">Zoom out</button></div>');var b=this.config.id;jQuery("head").append('<style type="text/css">#'+b+" .zoomControls { position: absolute; right: 20px; top: 20px; width: 20px; z-index: 1 } #"+
b+" .zoomControls .ui-button { height: 20px; margin: 1px 0; width: 20px } #"+b+" .zoomSlider { left: 3px; height: 225px; margin: 11px 0 } </style>");jQuery("#"+b+" .zoomInButton").button({icons:{primary:"ui-icon-plus"},text:s}).bind("click",{context:this},function(b){b=b.data.context;b.Q(Math.min(a.max,b.ha()+a.step))});jQuery("#"+b+" .zoomOutButton").button({icons:{primary:"ui-icon-minus"},text:s}).bind("click",{context:this},function(b){b=b.data.context;b.Q(Math.max(a.min,b.ha()-a.step))});jQuery("#"+
b+" .zoomSlider").slider(a).bind("slide",{context:this},function(a,b){a.data.context.Q(b.value)});switch(a.display){case "on":case "yes":case "true":case p:case 1:break;case "auto":"createTouch"in document&&jQuery("#"+b+" .zoomControls").hide();break;default:jQuery("#"+b+" .zoomControls").hide()}}this.Q(a.value)};Constellation.prototype.initZoomControls=Constellation.prototype.Na;
Constellation.prototype.Xa={id:"constellation",graphLoaderClass:SimpleGraphLoader,graphLoader:{},graphParserClass:JsonGraphParser,graphParser:{},graphViewClass:DirectGraphView,graphView:{},layoutClass:RoamerLayout,layout:{},zoomSlider:{display:"auto",orientation:"vertical",min:0.2,max:2,value:1,step:0.05}};Constellation.prototype.Ga=[["node",{rendererClass:DefaultNodeRenderer}],["edge",{rendererClass:DefaultEdgeRenderer}]];Constellation.prototype.mb=v("ba");Constellation.prototype.getModel=Constellation.prototype.mb;
Constellation.prototype.Va=function(a){this.debug("Set model:",a);this.ba=a;this.w&&this.w.setGraph(this.ba);this.m&&this.m.setSource(this.ba);this.sa()};Constellation.prototype.setModel=Constellation.prototype.Va;Constellation.prototype.kb=v("m");Constellation.prototype.getGraphView=Constellation.prototype.kb;
Constellation.prototype.Ta=function(a){this.debug("Set graph view:",a);this.m&&(this.m.setConstellation(q),this.m.setSource(q),this.m.setResult(q),jQuery(this.m).unbind("change"));if(this.m=a)this.m.setConstellation(this),this.m.setSource(this.ba),this.m.setResult(this),jQuery(this.m).bind("change",{context:this},function(a){a.data.context.M()})};Constellation.prototype.setGraphView=Constellation.prototype.Ta;Constellation.prototype.ib=v("v");Constellation.prototype.getGraphLoader=Constellation.prototype.ib;
Constellation.prototype.Ra=function(a){this.debug("Set graph loader:",a);this.v&&(this.v.setConstellation(q),this.v.setParser(q));if(this.v=a)this.v.setConstellation(this),this.v.setParser(this.w)};Constellation.prototype.setGraphLoader=Constellation.prototype.Ra;Constellation.prototype.jb=v("w");Constellation.prototype.getGraphParser=Constellation.prototype.jb;
Constellation.prototype.Sa=function(a){this.debug("Set graph parser:",a);this.w&&(this.v&&this.v.setParser(q),this.w.setGraph(q),jQuery(this.w).unbind("complete"));if(this.w=a)this.v&&this.v.setParser(this.w),this.w.setGraph(this.ba),jQuery(this.w).bind("complete",{context:this},function(a){a.data.context.sa()})};Constellation.prototype.setGraphParser=Constellation.prototype.Sa;Constellation.prototype.lb=v("I");Constellation.prototype.getLayout=Constellation.prototype.lb;
Constellation.prototype.Ua=function(a){this.debug("Set layout:",a);this.I&&(this.I.setConstellation(q),jQuery(this.I).unbind("change"));if(this.I=a)this.I.setConstellation(this),jQuery(this.I).bind("change",{context:this},function(a){a.data.context.Pa()})};Constellation.prototype.setLayout=Constellation.prototype.Ua;Constellation.prototype.oa=v("ia");Constellation.prototype.getNodeContainer=Constellation.prototype.oa;Constellation.prototype.Ia=v("Za");Constellation.prototype.getEdgeContainer=Constellation.prototype.Ia;
Constellation.prototype.Ka=v("G");Constellation.prototype.getSelectedNodeId=Constellation.prototype.Ka;Constellation.prototype.Ib=function(a){this.debug("Set selected node ID:",a);this.P&&(this.P=q,jQuery(this).trigger("edgeselect"));this.G!=a&&(this.G=a,jQuery(this).trigger("nodeselect",this.G))};Constellation.prototype.setSelectedNodeId=Constellation.prototype.Ib;Constellation.prototype.rb=v("P");Constellation.prototype.getSelectedEdgeId=Constellation.prototype.rb;
Constellation.prototype.Hb=function(a){this.G&&(this.G=q,jQuery(this).trigger("nodeselect"));this.P!=a&&(this.P=a,jQuery(this).trigger("edgeselect",this.P))};Constellation.prototype.setSelectedEdgeId=Constellation.prototype.Hb;Constellation.prototype.Ja=function(){return this.ia.getBBox()};Constellation.prototype.getRendererBounds=Constellation.prototype.Ja;
Constellation.prototype.F=function(a,b){this.debug("Add node:",a);this.k(a)&&h("Failed to add node. Node already exists. id="+a);var c=new (this.c("node",b&&b["class"]?b["class"].split(/\s/):[],"rendererClass",b,{rendererClass:DefaultNodeRenderer}))(this,a,b);c.create();c.draw();this.h.push(c);jQuery(this).trigger("nodeAdded",c);return c};Constellation.prototype.addNode=Constellation.prototype.F;
Constellation.prototype.k=function(a){for(var b=0;b<this.h.length;b++)if(this.h[b].id==a)return this.h[b];return q};Constellation.prototype.getNode=Constellation.prototype.k;Constellation.prototype.N=function(){return this.h.concat()};Constellation.prototype.getNodes=Constellation.prototype.N;Constellation.prototype.$=function(){return this.h.map(function(a){return a.id})};Constellation.prototype.getNodeIds=Constellation.prototype.$;Constellation.prototype.pa=function(){return this.h.length};
Constellation.prototype.getNodeLength=Constellation.prototype.pa;Constellation.prototype.removeNode=function(a){this.debug("Remove node:",a);for(var b=0;b<this.h.length;b++){var c=this.h[b];if(c.id==a){c.destroy(c);this.h.splice(b,1);jQuery(this).trigger("nodeRemoved",c);return}}h("Failed to remove node. Node does not exist. id="+a)};Constellation.prototype.removeNode=Constellation.prototype.removeNode;
Constellation.prototype.Aa=function(a,b){var c=this.k(a);c?c.data=b:h("Failed to update node. Node does not exist. id="+a);return c};Constellation.prototype.updateNode=Constellation.prototype.Aa;Constellation.prototype.Ca=function(a,b,c,d){var c=2<arguments.length?c:s,d=3<arguments.length?d:s,e=this.k(a);e?e.data=c?jQuery.extend(d,e.data,b):b:e=this.F(a,b);return e};Constellation.prototype.upsertNode=Constellation.prototype.Ca;
Constellation.prototype.D=function(a,b,c,d){this.debug("Add edge:",a);this.u(a)&&h("Failed to add edge. Edge already exists. id="+a);var e=this.k(b);e||h("Failed to add edge. Tail node does not exist. id="+b);(b=this.k(c))||h("Failed to add edge. Head node does not exist. id="+c);a=new (this.c("edge",d&&d["class"]?d["class"].split(/\s/):[],"rendererClass",d,{rendererClass:DefaultNodeRenderer}))(this,a,e,b,d);a.create();a.draw();this.e.push(a);e.edges.push(a);b.edges.push(a);jQuery(this).trigger("edgeAdded",
a);return a};Constellation.prototype.addEdge=Constellation.prototype.D;Constellation.prototype.u=function(a){for(var b=0;b<this.e.length;b++)if(this.e[b].id==a)return this.e[b];return q};Constellation.prototype.getEdge=Constellation.prototype.u;Constellation.prototype.Z=function(){return this.e.map(function(a){return a.id})};Constellation.prototype.getEdgeIds=Constellation.prototype.Z;Constellation.prototype.ga=function(){return this.e.concat()};Constellation.prototype.getEdges=Constellation.prototype.ga;
Constellation.prototype.ma=function(){return this.e.length};Constellation.prototype.getEdgeLength=Constellation.prototype.ma;
Constellation.prototype.da=function(a){this.debug("Remove edge:",a);var b,c=q;for(b=0;b<this.e.length;b++)if(this.e[b].id==a){c=this.e[b];c.destroy();this.e.splice(b,1);break}if(c){for(b=0;b<c.tailNode.edges.length;b++)if(c.tailNode.edges[b].id==a){c.tailNode.edges.splice(b,1);break}for(b=0;b<c.headNode.edges.length;b++)if(c.headNode.edges[b].id==a){c.headNode.edges.splice(b,1);break}jQuery(this).trigger("edgeRemoved",c)}else h("Failed to remove edge. Edge does not exist. id="+a)};
Constellation.prototype.removeEdge=Constellation.prototype.da;Constellation.prototype.za=function(a,b){var c=this.u(a);c?c.data=b:h("Failed to update edge. Edge does not exist. id="+a);return c};Constellation.prototype.updateEdge=Constellation.prototype.za;Constellation.prototype.Ba=function(a,b,c,d,e,g){var e=4<arguments.length?e:s,g=5<arguments.length?g:s,f=this.u(a);f?f.data=e?jQuery.extend(g,f.data,d):d:f=this.D(a,b,c,d);return f};Constellation.prototype.upsertEdge=Constellation.prototype.Ba;
Constellation.prototype.sa=function(){this.debug("Model changed");this.m&&this.m.Wa();jQuery(this).trigger("modelchanged")};Constellation.prototype.modelChanged=Constellation.prototype.sa;Constellation.prototype.M=function(){this.debug("View changed");this.I&&this.I.viewChanged();jQuery(this).trigger("viewchanged")};Constellation.prototype.viewChanged=Constellation.prototype.M;Constellation.prototype.Pa=function(){this.p()};Constellation.prototype.layoutChanged=Constellation.prototype.Pa;
Constellation.prototype.p=function(){var a;x(this);var b=this.h;for(a=0;a<b.length;a++)b[a].position();b=this.e;for(a=0;a<b.length;a++)b[a].draw()};function x(a){a.V=a.q.width();a.S=a.q.height();y(a)}function y(a){a.q.button&&a.q.slider&&jQuery("#"+a.config.id+" .zoomSlider").slider("option","value",a.l);jQuery(a.Ea).attr("transform","translate("+(a.V/2-a.s)+","+(a.S/2-a.t)+")scale("+a.l+","+a.l+")rotate("+180*a.rotation/Math.PI+")")}Constellation.prototype.ha=v("l");
Constellation.prototype.getZoomScale=Constellation.prototype.ha;Constellation.prototype.Q=function(a){this.l=a;y(this)};Constellation.prototype.setZoomScale=Constellation.prototype.Q;Constellation.prototype.T=function(a,b){return(a-this.V/2+this.s)/this.l*Math.cos(-this.rotation)-(b-this.S/2+this.t)/this.l*Math.sin(-this.rotation)};Constellation.prototype.viewportToWorldX=Constellation.prototype.T;
Constellation.prototype.U=function(a,b){return(a-this.V/2+this.s)/this.l*Math.sin(-this.rotation)+(b-this.S/2+this.t)/this.l*Math.cos(-this.rotation)};Constellation.prototype.viewportToWorldY=Constellation.prototype.U;Constellation.prototype.W=function(a,b){return(a*Math.cos(this.rotation)-b*Math.sin(this.rotation))*this.l+this.V/2-this.s};Constellation.prototype.worldToViewportX=Constellation.prototype.W;
Constellation.prototype.X=function(a,b){return(a*Math.sin(this.rotation)+b*Math.cos(this.rotation))*this.l+this.S/2-this.t};Constellation.prototype.worldToViewportY=Constellation.prototype.X;Constellation.prototype.A=function(a){return a-this.q.offset().left};Constellation.prototype.pageToViewportX=Constellation.prototype.A;Constellation.prototype.B=function(a,b){return b-this.q.offset().top};Constellation.prototype.pageToViewportY=Constellation.prototype.B;
Constellation.prototype.yb=function(a,b){a.stopPropagation();a.preventDefault();B(this,b);jQuery(this).trigger("nodemouseover",b.id)};Constellation.prototype.nodemouseoverHandler=Constellation.prototype.yb;Constellation.prototype.xb=function(a,b){a.stopPropagation();a.preventDefault();jQuery(this).trigger("nodemouseout",b.id)};Constellation.prototype.nodemouseoutHandler=Constellation.prototype.xb;
Constellation.prototype.wa=function(a,b){a.stopPropagation();a.preventDefault();B(this,b);var c=this.f._mouse={aa:s,ca:b,i:a,pageX:a.pageX,pageY:a.pageY,timestamp:(new Date).getTime()},d=this.A(a.pageX),e=this.B(0,a.pageY);c.ua=this.T(d,e)-b.x;c.va=this.U(d,e)-b.y;jQuery(this).trigger("nodemousedown",b.id)};Constellation.prototype.nodemousedownHandler=Constellation.prototype.wa;Constellation.prototype.zb=function(a,b){a.stopPropagation();a.preventDefault();jQuery(this).trigger("nodemouseup",b.id)};
Constellation.prototype.nodemouseupHandler=Constellation.prototype.zb;Constellation.prototype.wb=function(a,b){a.stopPropagation();a.preventDefault();var c=this.f._mouse;c&&G(a,c)&&jQuery(this).trigger("nodeclick",b.id);delete this.f._mouse};Constellation.prototype.nodeclickHandler=Constellation.prototype.wb;
Constellation.prototype.Bb=function(a,b){a.stopPropagation();a.preventDefault();B(this,b);for(var c=0;c<a.originalEvent.changedTouches.length;c++){var d=a.originalEvent.changedTouches[c];this.f["_"+d.identifier]={aa:p,ca:b,ua:this.A(d.pageX)-this.W(b.x,b.y),va:this.B(0,d.pageY)-this.X(b.x,b.y),i:d,pageX:d.pageX,pageY:d.pageY,timestamp:(new Date).getTime()}}jQuery(this).trigger("nodetouchstart",b.id)};Constellation.prototype.nodetouchstartHandler=Constellation.prototype.Bb;
Constellation.prototype.Ab=function(a,b){a.stopPropagation();a.preventDefault();for(var c=0;c<a.originalEvent.changedTouches.length;c++){var d=a.originalEvent.changedTouches[c],e=this.f["_"+d.identifier];e&&G(a,e)&&jQuery(this).trigger("nodeclick",b.id);delete this.f["_"+d.identifier]}jQuery(this).trigger("nodetouchend",b.id)};Constellation.prototype.nodetouchendHandler=Constellation.prototype.Ab;
Constellation.prototype.cb=function(a,b){a.stopPropagation();a.preventDefault();jQuery(this).trigger("edgemouseover",b.id)};Constellation.prototype.edgemouseoverHandler=Constellation.prototype.cb;Constellation.prototype.bb=function(a,b){a.stopPropagation();a.preventDefault();jQuery(this).trigger("edgemouseout",b.id)};Constellation.prototype.edgemouseoutHandler=Constellation.prototype.bb;
Constellation.prototype.ab=function(a,b){a.stopPropagation();a.preventDefault();this.f._mouse={Ya:b,aa:s,i:a,pageX:a.pageX,pageY:a.pageY};jQuery(this).trigger("edgemousedown",b.id)};Constellation.prototype.edgemousedownHandler=Constellation.prototype.ab;Constellation.prototype.eb=function(a,b){a.stopPropagation();a.preventDefault();jQuery(this).trigger("edgemouseup",b.id)};Constellation.prototype.edgemouseupHandler=Constellation.prototype.eb;
Constellation.prototype.$a=function(a,b){a.stopPropagation();a.preventDefault();var c=this.f._mouse;c&&G(a,c)&&jQuery(this).trigger("edgeclick",b.id)};Constellation.prototype.edgeclickHandler=Constellation.prototype.$a;
Constellation.prototype.gb=function(a,b){a.stopPropagation();a.preventDefault();for(var c=0;c<a.originalEvent.changedTouches.length;c++){var d=a.originalEvent.changedTouches[c];this.f["_"+d.identifier]={Ya:b,aa:p,i:d,pageX:d.pageX,pageY:d.pageY,timestamp:(new Date).getTime()}}jQuery(this).trigger("edgetouchstart",b.id)};Constellation.prototype.edgetouchstartHandler=Constellation.prototype.gb;
Constellation.prototype.fb=function(a,b){a.stopPropagation();a.preventDefault();for(var c=0;c<a.originalEvent.changedTouches.length;c++)delete this.f["_"+a.originalEvent.changedTouches[c].identifier];jQuery(this).trigger("edgetouchend",b.id)};Constellation.prototype.edgetouchendHandler=Constellation.prototype.fb;
Constellation.prototype.ta=function(a){var b=this.f._mouse;b&&(b.i=a);b&&G(a,b)&&jQuery(this).trigger("click");A(this);delete this.f._mouse;this.d==b&&(this.d=this.n,this.n=q);this.n==b&&(this.n=q);jQuery(this).trigger("mouseup")};
function A(a){var b=a.d,c=a.n;if(b){if(c){var d=a.W(c.x,c.y)-a.W(b.x,b.y),e=a.X(c.x,c.y)-a.X(b.x,b.y),g=Math.sqrt(d*d+e*e),f=a.A(c.i.pageX)-a.A(b.i.pageX),i=a.B(0,c.i.pageY)-a.B(0,b.i.pageY),c=Math.sqrt(f*f+i*i),d=Math.atan2(i,f)-Math.atan2(e,d);d>Math.PI&&(d-=2*Math.PI);d<-Math.PI&&(d=2*Math.PI+d);a.l=a.l*c/g;a.rotation+=d;a.s=a.s+a.W(b.x,b.y)-a.A(b.i.pageX);a.t=a.t+a.X(b.x,b.y)-a.B(0,b.i.pageY);0!=d&&a.p()}else a.s=a.s+a.W(b.x,b.y)-a.A(b.i.pageX),a.t=a.t+a.X(b.x,b.y)-a.B(0,b.i.pageY);y(a)}}
Constellation.prototype.c=function(a,b,c,d,e){var g,f;if(d&&void 0!==d[c])return d[c];if(b&&0<b.length)for(d=this.ka.length;0<d;d--){f=this.ka[d-1];g=f[0];var i=jQuery.inArray(".",g),j=0>i?g:g.substr(0,i);if(!(""!=j&&j!=a)){i=0>i?[]:g.substr(i+1).split(".");j=p;for(g=0;g<i.length;g++)if(0>jQuery.inArray(i[g],b)){j=s;break}if(j&&void 0!==f[1][c])return f[1][c]}}for(d=this.ka.length;0<d;d--)if((f=this.ka[d-1])&&1<f.length&&f[0]==a&&void 0!==f[1][c])return f[1][c];return e?e[c]:void 0};
Constellation.prototype.getStyle=Constellation.prototype.c;function B(a,b){jQuery(a.ia).children().last()[0]!=b.renderer.group&&jQuery(b.renderer.group).insertAfter(jQuery(a.ia).children().last())}function G(a,b){var c=a.pageX-b.pageX,d=a.pageY-b.pageY;return 5>Math.sqrt(c*c+d*d)}Constellation.prototype.debug=function(a){jQuery(this).trigger("log",["debug"].concat(Array.prototype.slice.call(arguments)))};Constellation.prototype.debug=Constellation.prototype.debug;
Constellation.prototype.warn=function(a){jQuery(this).trigger("log",["warn"].concat(Array.prototype.slice.call(arguments)))};Constellation.prototype.warn=Constellation.prototype.warn;Constellation.prototype.error=function(a){jQuery(this).trigger("log",["error"].concat(Array.prototype.slice.call(arguments)))};Constellation.prototype.error=Constellation.prototype.error;
